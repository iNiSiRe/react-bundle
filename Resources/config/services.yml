services:

    React\EventLoop\Factory: ~

    react.loop:
        public: true
        class: React\EventLoop\LoopInterface
        factory: 'React\EventLoop\Factory:create'

    react.socket.server:
        class: React\Socket\Server
        arguments: ["0.0.0.0:8080", "@react.loop"]

    http_foundation.factory:
        class: Symfony\Bridge\PsrHttpMessage\Factory\HttpFoundationFactory

    diactoris.factory:
        class: Symfony\Bridge\PsrHttpMessage\Factory\DiactorosFactory

    react.http.server:
        public: true
        class: inisire\ReactBundle\Server\Server
        arguments:
          - "@react.loop"
          - "@react.socket.server"
          - "@kernel"
          - "@http_foundation.factory"
          - "@diactoris.factory"
          - "@monolog.logger"

    async.listeners_collection:
      class: inisire\ReactBundle\EventDispatcher\ListenerStorage
      arguments: [!tagged async.event_listener]
      public: true

